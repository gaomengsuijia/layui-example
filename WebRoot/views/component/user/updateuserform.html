

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>修改用户资料</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/layui/css/layui.css" media="all">
</head>
<body>

<div class="layui-form" lay-filter="layuiadmin-form-useradmin" id="layuiadmin-form-useradmin" style="padding: 20px 0 0 0;">

    <input type="hidden" name="id"  autocomplete="off" class="layui-input" id="id">

    <div class="layui-form-item">
        <label class="layui-form-label">账号</label>
        <div class="layui-input-inline">
            <input type="text" name="username"  lay-verify="required"  autocomplete="off" class="layui-input" id="username" readonly>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">密码</label>
        <div class="layui-input-inline">
            <input type="text" name="password"  placeholder="请输入密码" autocomplete="off" class="layui-input" id="password">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">使用人部门</label>
        <div class="layui-input-inline">
            <input type="text" name="dept" lay-verify="required" placeholder="请输入使用人部门" autocomplete="off" class="layui-input" id="dept">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">真实姓名</label>
        <div class="layui-input-inline">
            <input type="text" name="name" lay-verify="required" placeholder="请输入真实姓名" autocomplete="off" class="layui-input" id="name">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">手机号码</label>
        <div class="layui-input-inline">
            <input type="text" name="mobile"  placeholder="请输入号码" autocomplete="off" class="layui-input" id="mobile">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">邮箱</label>
        <div class="layui-input-inline">
            <input type="text" name="email"  placeholder="请输入邮箱" autocomplete="off" class="layui-input" id="email">
        </div>
    </div>

    <div class="layui-form-item" lay-filter="sex">
        <label class="layui-form-label">选择性别</label>`
        <div class="layui-input-inline">
            <input type="radio" name="sex" value="男" title="男">
            <input type="radio" name="sex" value="女" title="女">
        </div>
    </div>
    <div class="layui-form-item layui-hide">
        <input type="button" lay-submit lay-filter="update-LAY-user-front-submit" id="update-LAY-user-front-submit" value="确认">
    </div>
</div>

<script src="/layui/layui.js"></script>
<script>
    layui.config({
        base: '/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'form'], function(){
        var $ = layui.$
            ,form = layui.form;

        //去除空格
        function Trim(str,is_global="g")
        {
            var result;
            result = str.replace(/(^\s+)|(\s+$)/g,"");
            if(is_global.toLowerCase()=="g")
            {
                result = result.replace(/\s/g,"");
            }
            return result;
        }

        //搜索工号
        $("#peopleserchebtn").on('click',function () {
            var peopleNovalue = Trim($("#username").val());
            if (peopleNovalue == '' || peopleNovalue==undefined){
                layer.msg("请输入工号");
            }else {
                $.ajax({
                    type: 'POST'
                    ,contentType: 'application/json;charset=utf-8'
                    ,url:  layui.setter.serverURL +　'/deptPeople/query'
                    ,data: JSON.stringify({peopleNo:peopleNovalue})
                    ,dataType : "json"
                    ,success: function(result) {
                        if ('0' == result.code) {
                            if (result.data == null){
                                layer.msg("工号不存在");
                            }
                            //填充input
                            $("#dept").val(result.data.workShop);
                            $("#name").val(result.data.peopleName);
                            $("#mobile").val(result.data.telePhone);

                        }
                        else {
                            layer.msg(result.msg)
                        }
                    },error: function(event, XMLHttpRequest, ajaxOptions, thrownError){
                        layer.msg("请求异常");
                    }
                });
            }


        })

    })
</script>
</body>
</html>
